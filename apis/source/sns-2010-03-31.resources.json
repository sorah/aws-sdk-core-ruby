{
  "service": {
    "actions": {
      "CreateTopic": {
        "request": { "operation":"CreateTopic" },
        "resource": {
          "type": "Topic",
          "identifiers": [
            { "target":"Arn", "sourceType":"responsePath", "source":"TopicArn" }
          ]
        }
      }
    },
    "hasMany": {
      "Topics": {
        "request": { "operation": "ListTopics" },
        "resource": {
          "type": "Topic",
          "identifiers": [
            { "target":"Arn", "sourceType":"responsePath", "source":"Topics[].TopicArn" }
          ]
        }
      }
    }
  },
  "resources" : {
    "Topic" : {
      "shape": "Topic",
      "identifiers": ["Arn"],
      "actions": {
        "Subscribe": {
          "request": {
            "operation": "Subscribe",
            "params": [
              { "target":"TopicArn", "sourceType":"identifier", "source":"Arn" }
            ]
          },
          "resource": {
            "type": "Subscription",
            "identifiers": [
              { "target":"TopicArn", "sourceType":"identifier", "source":"Arn" },
              { "target":"Arn", "sourceType":"responsePath", "source":"SubscriptionArn"}
            ]
          }
        },
        "Delete": {
          "request": {
            "operation": "DeleteTopic",
            "params": [
              { "target":"TopicArn", "sourceType":"identifier", "source":"Arn" }
            ]
          }
        }
      },
      "hasMany": {
        "Subscriptions": {
          "request": {
            "operation": "ListSubscriptionsByTopic",
            "params": [
              { "target":"TopicArn", "sourceType":"identifier", "source":"Arn" }
            ]
          },
          "resource": {
            "type": "Subscription",
            "identifiers": [
              { "target":"TopicArn", "sourceType":"identifier", "source":"Arn" },
              { "target":"Arn", "sourceType":"responsePath", "source":"Subscriptions[].SubscriptionArn"}
            ]
          }
        }
      },
      "subResources": {
        "resources":["Subscription"],
        "identifiers": { "Arn": "TopicArn" }
      }
    },
    "Subscription": {
      "shape": "Subscription",
      "identifiers": ["TopicArn", "Arn"],
      "actions": {
        "Delete": {
          "request": {
            "operation": "Unsubscribe",
            "params": [
              { "target":"SubscriptionArn", "sourceType":"identifier", "source":"Arn" }
            ]
          }
        }
      }
    }
  }
}
